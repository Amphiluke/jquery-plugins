/*!
 * fx-pie-charts.js by Amphiluke, 2013 (c)
 * JavaScript module for pie charts plotting
 *
 * https://github.com/Amphiluke/jquery-plugins/tree/master/src/fx-pie-charts
 */
(function(f){"use strict";var d=Math.PI/180,i=["#F0F8FF","#FAEBD7","#00FFFF","#7FFFD4","#F0FFFF","#F5F5DC","#FFE4C4","#000000","#FFEBCD","#0000FF","#8A2BE2","#A52A2A","#DEB887","#5F9EA0","#7FFF00","#D2691E","#FF7F50","#6495ED","#FFF8DC","#DC143C","#00FFFF","#00008B","#008B8B","#B8860B","#A9A9A9","#006400","#BDB76B","#8B008B","#556B2F","#FF8C00","#9932CC","#8B0000","#E9967A","#8FBC8F","#483D8B","#2F4F4F","#00CED1","#9400D3","#FF1493","#00BFFF","#696969","#1E90FF","#B22222","#FFFAF0","#228B22","#FF00FF","#DCDCDC","#F8F8FF","#FFD700","#DAA520","#808080","#008000","#ADFF2F","#F0FFF0","#FF69B4","#CD5C5C","#4B0082","#FFFFF0","#F0E68C","#E6E6FA","#FFF0F5","#7CFC00","#FFFACD","#ADD8E6","#F08080","#E0FFFF","#FAFAD2","#D3D3D3","#90EE90","#FFB6C1","#FFA07A","#20B2AA","#87CEFA","#778899","#B0C4DE","#FFFFE0","#00FF00","#32CD32","#FAF0E6","#FF00FF","#800000","#66CDAA","#0000CD","#BA55D3","#9370DB","#3CB371","#7B68EE","#00FA9A","#48D1CC","#C71585","#191970","#F5FFFA","#FFE4E1","#FFE4B5","#FFDEAD","#000080","#FDF5E6","#808000","#6B8E23","#FFA500","#FF4500","#DA70D6","#EEE8AA","#98FB98","#AFEEEE","#DB7093","#FFEFD5","#FFDAB9","#CD853F","#FFC0CB","#DDA0DD","#B0E0E6","#800080","#FF0000","#BC8F8F","#4169E1","#8B4513","#FA8072","#F4A460","#2E8B57","#FFF5EE","#A0522D","#C0C0C0","#87CEEB","#6A5ACD","#708090","#FFFAFA","#00FF7F","#4682B4","#D2B48C","#008080","#D8BFD8","#FF6347","#40E0D0","#EE82EE","#F5DEB3","#FFFFFF","#F5F5F5","#FFFF00","#9ACD32"],g="http://www.w3.org/2000/svg",j=document,h=j.createElementNS&&j.createElementNS(g,"svg").createSVGRect,b=j.namespaces&&j.namespaces.add,e=j.createElement("canvas").getContext;if(!(h||b||e)){return}var a={svg:{init:function(){this.Chart.prototype=this.chartProto},Chart:function(l){var k=this;k.container=(typeof l.container=="string")?j.getElementById(l.container):l.container,k.chartWidth=l.width||k.container.clientWidth,k.chartHeight=l.height||k.container.clientHeight,k.colors=l.colors||i,k.angles=k.getAngles(l.data||k.container.getAttribute("data-fx-chart").split(/\s*,\s*/));k.svg=k.createCanvas();k.plot(l.outline);k.container.appendChild(k.svg);if(l.handlers){k.addHandlers(l.handlers)}},chartProto:{createCanvas:function(){var l=this,k=j.createElementNS(g,"svg:svg");l.attr(k,{width:l.chartWidth,height:l.chartHeight,viewBox:"0 0 "+l.chartWidth+" "+l.chartHeight});return k},addHandlers:function(k){var n=this,l=Array.prototype.indexOf,o=function(p){n.svg.addEventListener(p,function(r){var q=l.call(this.getElementsByTagNameNS(g,"path"),r.target);if(q>-1){k[p].call(r.target,r,q)}},false)};for(var m in k){if(k.hasOwnProperty(m)){o(m)}}},plot:function(k){var o=this,m=o.chartWidth/2,l=o.chartHeight/2,r=0,t=o.colors.length,q="M "+m+" "+l+" L ",u,s;for(var n=0,p=o.angles.length;n<p;n++){u=o.svg.appendChild(j.createElementNS(g,"path"));s=q+(m-m*Math.sin(r*d))+" "+(l-l*Math.cos(r*d));r+=o.angles[n];s+=" A "+m+" "+l+" 0 "+((o.angles[n]>180)?"1":"0")+" 0 "+(m-m*Math.sin(r*d))+" "+(l-l*Math.cos(r*d))+" Z";o.attr(u,{fill:o.colors[n%t],d:s})}if(k){o.attr(o.svg.appendChild(j.createElementNS(g,"ellipse")),{cx:m,cy:l,rx:m-0.5,ry:l-0.5,fill:"none",stroke:k})}}}},vml:{init:function(){j.namespaces.add("fxpc","urn:schemas-microsoft-com:vml");j.createStyleSheet().cssText="fxpc\\:group, fxpc\\:shape { behavior:url(#default#VML); position:absolute; }";this.Chart.prototype=this.chartProto},Chart:function(l){var k=this;k.container=(typeof l.container=="string")?j.getElementById(l.container):l.container,k.chartWidth=l.width||k.container.clientWidth,k.chartHeight=l.height||k.container.clientHeight,k.colors=l.colors||i,k.angles=k.getAngles(l.data||k.container.getAttribute("data-fx-chart").split(/\s*,\s*/)),k.group=k.createCanvas();k.setStyles(k.group);k.plot(l.outline);k.container.appendChild(k.group);if(l.handlers){k.addHandlers(l.handlers)}},chartProto:{createCanvas:function(){var l=this,k=j.createElement("fxpc:group");l.attr(k,{coordsize:l.chartWidth+" "+l.chartHeight});return k},addHandlers:function(k){var m=this,n=function(o){m.group.attachEvent("on"+o,function(q){var p=q.srcElement;k[o].call(p,q,p.sourceIndex-m.group.sourceIndex-1)})};for(var l in k){if(k.hasOwnProperty(l)){n(l)}}},plot:function(k){var p=this,n=p.chartWidth>>1,m=p.chartHeight>>1,s=90,l=p.colors,u=l.length,t,r="m "+n+" "+m+" ae "+n+" "+m+" "+n+" "+m+" ";for(var o=0,q=p.angles.length;o<q;o++){t=p.group.appendChild(j.createElement("fxpc:shape"));p.setStyles(t);p.attr(t,{fillcolor:l[o%u],stroked:false,path:r+Math.round(s*65535)+" "+Math.round(p.angles[o]*65535)+" x e"});s+=p.angles[o]}if(k){t=p.group.appendChild(j.createElement("fxpc:shape"));p.setStyles(t);p.attr(t,{filled:false,stroked:true,strokecolor:k,path:"ar 0 0 "+p.chartWidth+" "+p.chartHeight+" 0 "+m+" 0 "+m+" x e"})}},setStyles:function(l){var k=l.style;k.width=this.chartWidth+"px";k.height=this.chartHeight+"px"}}},canvas:{init:function(){this.Chart.prototype=this.chartProto},Chart:function(l){var k=this;k.container=(typeof l.container=="string")?j.getElementById(l.container):l.container;k.chartWidth=l.width||k.container.clientWidth;k.chartHeight=l.height||k.container.clientHeight;k.angles=k.getAngles(l.data||k.container.getAttribute("data-fx-chart").split(/\s*,\s*/));k.canvas=k.createCanvas();k.plot(k.canvas.getContext("2d"),l.colors||i,l.outline);k.container.appendChild(k.canvas);if(l.handlers){k.addHandlers(l.handlers)}},chartProto:{createCanvas:function(){var l=this,k=j.createElement("canvas");l.attr(k,{width:l.chartWidth,height:l.chartHeight});k.style.width=l.chartWidth+"px";k.style.height=l.chartHeight+"px";k.style.position="absolute";return k},addHandlers:function(m){var o=this,q=o.canvas.getBoundingClientRect(),n=j.body.appendChild(o.createCanvas()),s=n.getContext("2d"),p=function(w){var v=s.getImageData(w.pageX-q.left,w.pageY-q.top,1,1).data,t="#";if(v[3]==0){return -1}for(var u=0;u<3;u++){t+=(v[u]>15)?v[u].toString(16):"0"+v[u].toString(16)}return i.indexOf(t.toUpperCase())},k=function(t){o.canvas.addEventListener(t,function(v){var u=p(v);if(u>-1){m[t].call(this,v,u)}},false)},r=function(u){var t=-1;o.canvas.addEventListener("mousemove",function(w){var v=p(w);if(v==t){return}if((u=="mouseover"&&v!=-1)||(u=="mouseout"&&t!=-1)){m[u].call(this,w,v)}t=v},false)};n.style.left=n.style.top="-9999px";o.plot(s,i);for(var l in m){if(m.hasOwnProperty(l)){if(l=="mouseover"||l=="mouseout"){r(l)}else{k(l)}}}},plot:function(t,l,k){var p=this,n=p.chartWidth/2,m=p.chartHeight/2,s=l.length,r=-90*d;for(var o=0,q=p.angles.length;o<q;o++){t.beginPath();t.moveTo(n,m);t.fillStyle=l[o%s];t.arc(n,m,n,r,(r-=p.angles[o]*d),true);t.fill()}if(k){t.strokeStyle=k;t.beginPath();t.moveTo(p.chartWidth,m);t.arc(n,m,n-0.5,0,360*d);t.stroke()}}}}},c=(h)?a.svg:((b)?a.vml:a.canvas);c.init();c.Chart.prototype.getAngles=function(o){var p=[],n=0,m;for(var l=0,k=o.length;l<k;l++){n+=+o[l]}m=360/n;for(l=0;l<k;l++){p.push(o[l]*m)}return p};c.Chart.prototype.attr=function(m,k){for(var l in k){if(k.hasOwnProperty(l)){m.setAttribute(l,k[l])}}};if(f){f.fn.fxPieChart=function(m){if(!m){m={}}var l=(typeof m=="function"),k=function(o){var n=(l)?m.call(o,o):m;return(n.container)?n:f.extend({container:o},n)};return this.each(function(){new c.Chart(k(this))})}}else{window.fxPieChart=function(k){new c.Chart(k)}}})(window.jQuery);